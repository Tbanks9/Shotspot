(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{40:function(e,a,t){e.exports=t(73)},45:function(e,a,t){},73:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(20),c=t.n(s),l=t(13),i=t(19),o=(t(45),t(46),t(3)),m=t(4),u=t(6),d=t(5),h=t(7),p=function(e){function a(){return Object(o.a)(this,a),Object(u.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(h.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"home-title"},r.a.createElement("h1",null,"Shotspot."))))}}]),a}(r.a.Component),v=t(1),b=t.n(v),f=t(9),g=t(10),E=t.n(g),N=t(39),y=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={cities:null,cityFilter:"",chosenCity:"ALL"},t.options=[{value:"Bangkok",label:"Bangkok"},{value:"Hong Kong",label:"Hong Kong"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Reykjavik",label:"Reykjavik"},{value:"Lima",label:"Lima"}],t.handleChange=function(e){t.setState({chosenCity:e.value}),console.log(t.state.chosenCity)},t.filterCities=function(){return t.state.cities.filter((function(e){return e.city_name===t.state.chosenCity||"ALL"===t.state.chosenCity}))},t}return Object(h.a)(a,e),Object(m.a)(a,[{key:"getData",value:function(){var e=Object(f.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/api/cities");case 3:a=e.sent,this.setState({cities:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){return this.state.cities?(console.log(this.state.cities),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"hero-body-index"},r.a.createElement("div",{className:"fieldContainer"},r.a.createElement("h1",{className:"cityTitle"},"Pick your city"),r.a.createElement("div",{className:"control"},r.a.createElement(N.a,{options:this.options,onChange:this.handleChange,className:"selectBar"}),r.a.createElement("h2",{className:"header"},"City selected: ",r.a.createElement("span",null,this.state.chosenCity)),this.filterCities().map((function(e){return e.photographyspots.map((function(e){return r.a.createElement("div",{className:"photograpySpot"},r.a.createElement("br",null),r.a.createElement("h1",{className:"photoSpotTitle"},e.location_name),r.a.createElement("br",null),r.a.createElement("img",{src:e.location_image,className:"image",alt:e.location_name}),r.a.createElement("br",null),r.a.createElement("h2",{className:"description"},e.location_description),r.a.createElement("br",null))}))}))))))):null}}]),a}(r.a.Component),k=t(15),O=t(18),C=function(){function e(){Object(o.a)(this,e)}return Object(m.a)(e,null,[{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"logout",value:function(){localStorage.removeItem("token")}},{key:"getPayload",value:function(){var e=this.getToken();if(!e)return!1;var a=e.split(".");return!(a.length<3)&&JSON.parse(atob(a[1]))}},{key:"isAuthenticated",value:function(){var e=this.getPayload();return!!e&&Math.round(Date.now()/1e3)<e.exp}},{key:"getUser",value:function(){return this.getPayload().sub}}]),e}(),j=t(35),w={common:{"X-CSRF-TOKEN":t.n(j).a.get("csrftoken")}},S=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={data:{}},t.handleChange=function(e){var a=e.target,n=a.name,r=a.value,s=Object(O.a)({},t.state.user,Object(k.a)({},n,r));t.setState({user:s})},t.handleDelete=Object(f.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.match.params.id,e.prev=1,e.next=4,E.a.delete("/api/users/".concat(a),t.state.data,w);case 4:t.props.history.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),t}return Object(h.a)(a,e),Object(m.a)(a,[{key:"getData",value:function(){var e=Object(f.a)(b.a.mark((function e(){var a,t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=C.getUser(),e.prev=1,e.next=4,E.a.get("/api/users/".concat(a),this.state.data,w);case 4:t=e.sent,console.log(t.data),this.setState({data:t.data}),console.log(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.props.history.push("/notfound");case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){return this.state.data.cities?r.a.createElement("section",{className:"user-body-index"},r.a.createElement("div",{className:"userContainer"},r.a.createElement("h2",{className:"username"},"Hey, ",this.state.data.username,"! \ud83d\udc4b "),r.a.createElement("h3",{className:"username"},"So far you've visited.."),this.state.data.cities.map((function(e){return r.a.createElement("div",{className:"userCities"},r.a.createElement("br",null),r.a.createElement("h1",{className:"photoSpotTitle"},e.city_name),r.a.createElement("br",null))})),r.a.createElement("div",{className:"buttonContainer"},r.a.createElement(l.b,{to:"/profile/".concat(this.state.data.id,"/edit"),type:"submit",className:"loginButton"},"Edit Profile")))):null}}]),a}(r.a.Component),x=function(e){var a=e.data,t=e.handleChange,n=e.handleDelete,s=e.handleSubmit,c=e.errors;return r.a.createElement("section",{className:"hero-body-index"},r.a.createElement("form",{onSubmit:s,className:"user-container"},r.a.createElement("div",{className:"registerForm"},r.a.createElement("div",{className:"fieldContainer"},r.a.createElement("h2",{className:"title"},"Edit profile"),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"registerLabel"},"First name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(c.first_name?"is-danger":""),placeholder:"Enter your surname",id:"first_name",name:"first_name",onChange:t,value:a.first_name})),c.name&&r.a.createElement("small",{className:"help is-danger"},c.first_name)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"registerLabel"},"Second name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(c.second_name?"is-danger":""),placeholder:"Enter your surname",id:"second_name",name:"second_name",onChange:t,value:a.second_name}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"registerLabel"},"Username"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(c.username?"is-danger":""),placeholder:"Enter your username",id:"username",name:"username",onChange:t,value:a.username}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"registerLabel"},"Email"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(c.email?"is-danger":""),placeholder:"Email",name:"email",onChange:t,value:a.email})))),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{type:"submit",className:"editButton1"},"Save"),r.a.createElement("br",null),r.a.createElement("button",{onClick:n,className:"editButton2"},"Delete")))))},L=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={data:{first_name:"",second_name:"",username:"",email:""},errors:{}},t.handleChange=function(e){var a=e.target,n=a.name,r=a.value,s=Object(O.a)({},t.state.data,Object(k.a)({},n,r));t.setState({data:s})},t.handleSubmit=function(){var e=Object(f.a)(b.a.mark((function e(a){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),console.log(t.props.match.params.id),n=t.props.match.params.id,e.prev=3,e.next=6,E.a.put("/api/users/".concat(n),t.state.data,w);case 6:r=e.sent,C.setToken(r.data.token),t.props.history.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),t.setState(e.t0.response.data.errors);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(a){return e.apply(this,arguments)}}(),t.handleDelete=Object(f.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.match.params.id,e.prev=1,e.next=4,E.a.delete("/api/users/".concat(a),t.state.data,w);case 4:t.props.history.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),t}return Object(h.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(b.a.mark((function e(){var a,t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.match.params.id,console.log(this.props.match.params.id),e.prev=2,e.next=5,E.a.get("/api/users/".concat(a),this.state.data,w);case 5:t=e.sent,this.setState({data:t.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("something is wrong",e.t0);case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.data.first_name?r.a.createElement(x,{data:this.state.data,handleChange:this.handleChange,handleSubmit:this.handleSubmit,handleDelete:this.handleDelete,errors:this.state.errors}):null}}]),a}(r.a.Component),_=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={navbarOpen:!1,searchResult:null},t.handleClick=function(e){localStorage.setItem("skill",e.target.innerHTML)},t.handleLogout=function(){C.logout(),t.props.history.push("/")},t}return Object(h.a)(a,e),Object(m.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&this.setState({navbarOpen:!1})}},{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar nav is-transparent is-fixed-top"},r.a.createElement("div",{className:"container"},r.a.createElement(l.b,{className:"navbar-item",to:"/"},"Home"),r.a.createElement(l.b,{className:"navbar-item",to:"/cities"},"Cities"),r.a.createElement("div",{className:"navbar-end"},!C.isAuthenticated()&&r.a.createElement(l.b,{className:"navbar-item",to:"/register"},"Register"),!C.isAuthenticated()&&r.a.createElement(l.b,{className:"navbar-item",to:"/login"},"Login"),C.isAuthenticated()&&r.a.createElement(l.b,{className:"navbar-item",to:"/profile"},"Profile"),C.isAuthenticated()&&r.a.createElement("a",{href:!0,className:"navbar-item",onClick:this.handleLogout},"Logout"))))}}]),a}(r.a.Component),D=Object(i.g)(_),A=function(){return r.a.createElement("section",{className:"hero is-fullheight-with-navbar is-primary"},r.a.createElement("div",{className:"hero-body-failed"},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"title is-1 has-text-centered"},"Oops, you travelled somewhere unknown!"))))},B=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={data:{email:"",password:""},error:""},t.handleChange=function(e){var a=e.target,n=a.name,r=a.value,s=Object(O.a)({},t.state.data,Object(k.a)({},n,r));t.setState({data:s,error:""})},t.handleSubmit=function(){var e=Object(f.a)(b.a.mark((function e(a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,E.a.post("/api/login",t.state.data,w);case 4:n=e.sent,C.setToken(n.data.token),t.props.history.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.setState({error:"Invalid Credentials"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}(),t}return Object(h.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"hero-body-index"},r.a.createElement("div",{className:"logincontainer"},r.a.createElement("div",{className:"logincolumns"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"column"},r.a.createElement("h1",{className:"logintitle has-texted-centered"},"Login"),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-large is-primary ".concat(this.state.error?"is-dark":""),id:"email",name:"email",placeholder:"Email",onChange:this.handleChange}))),r.a.createElement("div",{className:"loginfield"},r.a.createElement("br",null),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-large is-primary ".concat(this.state.error?"is-danger":""),type:"password",id:"password",name:"password",placeholder:"Password",onChange:this.handleChange})),this.state.error&&r.a.createElement("small",{className:"is-danger"},this.state.error)),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"loginButton"},"Login"))))))}}]),a}(r.a.Component),F=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={data:{}},t.handleChange=function(e){var a=Object(O.a)({},t.state.data,Object(k.a)({},e.target.name,e.target.value));t.setState({data:a})},t.handleSubmit=function(){var e=Object(f.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),console.log("submitting",t.state.data),e.prev=2,e.next=5,E.a.post("/api/register",t.state.data);case 5:t.props.history.push("/login"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),t.setState({errors:e.t0.response.data.errors});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(a){return e.apply(this,arguments)}}(),t}return Object(h.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"hero-body-index"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"user-container"},r.a.createElement("div",{className:"registerForm"},r.a.createElement("br",null),r.a.createElement("div",{className:"registerContainer"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"registerLabel"},"First name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Enter your first name",id:"first_name",name:"first_name",onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"registerLabel"},"Surname"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Enter your surname",id:"second_name",name:"second_name",onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"registerLabel"},"Username"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Enter your username",id:"username",name:"username",onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"registerLabel"},"Email"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Enter email",id:"email",name:"email",onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"registerLabel"},"Password"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"password",placeholder:"Enter password",id:"password",name:"password",onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"registerLabel"},"Password Confirmation"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"password",placeholder:"Re-enter password",id:"password_confirmation",name:"password_confirmation",onChange:this.handleChange})),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"registerButton"},"Register now"))))))}}]),a}(r.a.Component),T=t(38),P=function(e){var a=e.component,t=Object(T.a)(e,["component"]);return C.isAuthenticated()?r.a.createElement(i.b,Object.assign({},t,{component:a})):(C.logout(),r.a.createElement(i.a,{to:"/login"}))};var R=function(){return r.a.createElement(l.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:p}),r.a.createElement(P,{path:"/profile/:id/edit",component:L}),r.a.createElement(i.b,{path:"/login",component:B}),r.a.createElement(i.b,{path:"/register",component:F}),r.a.createElement(i.b,{path:"/cities",component:y}),r.a.createElement(i.b,{path:"/profile",component:S}),r.a.createElement(i.b,{path:"/*",component:A}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.0f48f497.chunk.js.map